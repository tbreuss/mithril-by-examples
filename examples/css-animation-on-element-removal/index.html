<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="google-site-verification" content="4spLhTDINzdede85HIlvHd0YVnKLKeP1Xw4FnIUaT1Q" />
    <title>CSS Animation on Element Removal | Mithril.js by Examples</title>
    <link rel="stylesheet" href="/css/pure-min.css?v=1646565642">
    <link rel="stylesheet" href="/css/grids-responsive-min.css?v=1646565642">
    <link rel="stylesheet" href="/css/styles.css?v=1646565642">
    <link rel="stylesheet" href="/css/highlight/styles/atom-one-dark.min.css?v=1646565642">
    <script src="https://flems.io/flems.html" type="text/javascript" charset="utf-8"></script>
  </head>
  <body>
    <div class="header">
      <div class="container">
        <div class="pure-g custom-wrapper" id="menu">
            <div class="pure-u-1 pure-u-md-1-3">
              <div class="pure-menu">
                <a class="pure-menu-heading custom-brand" href="/"><img src="https://mithril.js.org/logo.svg" alt="">Mithril.js by Examples</a>
                <a href="#" class="custom-toggle" id="toggle"><s class="bar"></s><s class="bar"></s></a>
              </div>
            </div>
            <div class="pure-u-1 pure-u-md-2-3">
                <div class="pure-menu pure-menu-horizontal custom-can-transform">
                    <ul class="pure-menu-list">
                        <li class="pure-menu-item pure-menu-selected"><a class="pure-menu-link" href="/examples/">Examples</a></li>
                        <li class="pure-menu-item"><a class="pure-menu-link" href="/tags/">Tags</a></li>
                        <li class="pure-menu-item"><a class="pure-menu-link" href="/contributors/">Contributors</a></li>
                        <li class="pure-menu-item"><a class="pure-menu-link" href="/search/">Search</a></li>
                      </ul>
                </div>
            </div>
        </div>
    </div>
  </div>
    <div class="container content">
  <div class="pure-g">
      <div class="pure-u-1">

        <h1>CSS Animation on Element Removal</h1>

        <p class="no-margin-bottom">
          <time datetime="2021-10-19">19 October 2021</time><span class="author">
            by&nbsp;<span class="author"><a href="/contributors/mithril/">mithril</a></span>
          </span>
        </p>
        <p class="no-margin-bottom">Level: <span class="level">beginner</span> â€¢ Mithril.js Version: <span class="version">2.0.4</span>
        </p>

        <p>
          
          
          <a href="/tags/animation/" class="post-tag">animation</a>
          
          
          <a href="/tags/basics/" class="post-tag">basics</a>
          
          
          <a href="/tags/dom/" class="post-tag">dom</a>
          
          
          <a href="/tags/m.mount/" class="post-tag">m.mount</a>
          
          
          <a href="/tags/official/" class="post-tag">official</a>
          
          
          <a href="/tags/onbeforeremove/" class="post-tag">onbeforeremove</a>
          
          
          <a href="/tags/vnode/" class="post-tag">vnode</a>
          
        </p>

        <div class="toc">
        <h2 class="toc__heading">Contents</h2>
        <ol class="toc__list"><li class="toc__item"><a clas="toc__link" href="#live-example">Live Example</a></li><li class="toc__item"><a clas="toc__link" href="#dependencies">Dependencies</a></li><li class="toc__item"><a clas="toc__link" href="#styles">Styles</a></li><li class="toc__item"><a clas="toc__link" href="#javascript">JavaScript</a></li><li class="toc__item"><a clas="toc__link" href="#contribute">Contribute</a></li></ol>
    </div>

        <p>This is an example using CSS animation on element removal.
The difficulty here is that we must wait until the animation is complete before we can actually remove the element.
Therefore Mithril.js offers the <code>onbeforeremove</code> hook that allows us to defer the removal of an element.
This example was taken from the official website at <a href="https://mithril.js.org/animation.html#animation-on-element-removal">https://mithril.js.org/animation.html#animation-on-element-removal</a> and slightly modified.</p>

      <h2 id="live-example">Live Example <a class="direct-link" href="#live-example" aria-hidden="true">#</a></h2>
      <div id="flems"></div>
      <script>
      Flems(document.getElementById("flems"), {
        middle: 0,
        resizable: false,
        editable: true,
        toolbar: true,
        autoHeight: false,
        selected: '.js',
        files: [{"name":".css","content":".fancy {\n  font-size: 2rem;\n}\n.exit {\n  animation:fade-out 2.0s;\n  font-size: 2rem;\n}\n@keyframes fade-out {\n  from {opacity:1;}\n  to {opacity:0;}\n}\n"},{"name":".js","content":"var on = true\n\nvar Toggler = {\n  view: function() {\n    return [\n      m(\"button\", {onclick: function() {on = !on}}, \"Toggle\"),\n      on ? m(FancyComponent) : null,\n    ]\n  }\n}\n\nvar FancyComponent = {\n  onbeforeremove: function(vnode) {\n    vnode.dom.classList.add(\"exit\")\n    return new Promise(function(resolve) {\n      vnode.dom.addEventListener(\"animationend\", resolve)\n    })\n  },\n  view: function() {\n    return m(\".fancy\", \"Hello world\")\n  }\n}\n\nm.mount(document.body, Toggler)\n"}],
        links: [{"name":"mithril@2.0.4","type":"script","url":"https://unpkg.com/mithril@2.0.4"}]
      });
      </script>
    
        <div class="dependencies">
          <h2 id="dependencies" class="dependencies__heading" tabindex="-1">Dependencies <a class="direct-link" href="#dependencies" aria-hidden="true">#</a></h2>
          <div class="dependencies__tableWrap">
            <table class="dependencies__table dependencies__table--1">
                <thead>
                    <tr>
                        <th>Type</th>
                        <th>Name</th>
                        <th>URL</th>
                    </tr>
                </thead>
                <tbody>
                <tr><td class="capitalize">script</td><td>mithril@2.0.4</td><td>https://unpkg.com/mithril@2.0.4</td></tr>
                </tbody>
            </table>
          </div>
        </div>
      <h2 id="styles" tabindex="-1">Styles <a class="direct-link" href="#styles" aria-hidden="true">#</a></h2>
<pre><code class="language-css">.fancy {
  font-size: 2rem;
}
.exit {
  animation:fade-out 2.0s;
  font-size: 2rem;
}
@keyframes fade-out {
  from {opacity:1;}
  to {opacity:0;}
}
</code></pre>
<h2 id="javascript" tabindex="-1">JavaScript <a class="direct-link" href="#javascript" aria-hidden="true">#</a></h2>
<pre><code class="language-js">var on = true

var Toggler = {
  view: function() {
    return [
      m(&quot;button&quot;, {onclick: function() {on = !on}}, &quot;Toggle&quot;),
      on ? m(FancyComponent) : null,
    ]
  }
}

var FancyComponent = {
  onbeforeremove: function(vnode) {
    vnode.dom.classList.add(&quot;exit&quot;)
    return new Promise(function(resolve) {
      vnode.dom.addEventListener(&quot;animationend&quot;, resolve)
    })
  },
  view: function() {
    return m(&quot;.fancy&quot;, &quot;Hello world&quot;)
  }
}

m.mount(document.body, Toggler)
</code></pre>
<p>The snippet requires the latest version 2.0.4 of Mithril.js framework.
It is ideal for beginners showing some basic recipes.</p>
<p>In this example we can see an example of Mithril.js' <code>m.mount</code> <a href="/api-methods/">API method</a>, besides it core m() hyperscript function.
It is also showing the <code>onbeforeremove</code> hook, which is one of several Mithril.js' <a href="/lifecycle-methods/">lifecycle methods</a>.
We can also see the usecase of virtual DOM nodes (Vnodes) that is a JavaScript data structure describing a DOM tree.</p>
<p>The code sample was authored by mithril. It was last modified on 19 October 2021.
Want to see more examples written by mithril? Then <a href="/contributors/mithril/">Click here</a>.</p>


        <h2 id="contribute" tabindex="-1">Contribute <a class="direct-link" href="#contribute" aria-hidden="true">#</a></h2>
<p>Do you see some improvements, that could be addressed here? Then let me know by <a href="https://github.com/tbreuss/mithril-by-examples/issues">opening an issue</a>.
As an alternative, you can fork the repository on GitHub, push your commits and send a pull request.
To start your work, click on the edit link below. Thank you for contributing to this repo.</p>


        <p style="margin-top:3.2rem;">
          <a href="/examples/">See more code examples</a>
          &nbsp;|&nbsp; <a target="_blank" href="https://github.com/tbreuss/mithril-by-examples/blob/main/./examples/css-animation-on-element-removal.md">Edit this example on GitHub</a>
        </p>

    </div>
  </div>
</div>

    <div class="footer">
      <div class="container">
          <div class="pure-g">
              <div class="pure-u-1 pure-u-md-3-5 footer-about">
                  <h3 class="footer-about__heading">Mithril.js by Examples</h3>
                  <p class="footer-about__text">The missing addition to Mithril.js' website with many up-to-date code examples that are often searched for and just work...</p>
              </div>
              <div class="pure-u-1-2 pure-u-md-1-5 footer-tools">
                <h3 class="footer-tools__heading">Toolset</h3>
                <ul class="footer-tools__list">
                    <li><a target="_blank" href="https://www.11ty.dev">Eleventy</a></li>
                    <li><a target="_blank" href="http://purecss.io">Pure.css</a></li>
                    <li><a target="_blank" href="https://flems.io">Flems.io</a></li>
                    <li><a target="_blank" href="http://mithril.js.org">Mithril.js</a></li>
                </ul>
            </div>
              <div class="pure-u-1-2 pure-u-md-1-5 footer-links">
                  <h3 class="footer-links__heading">Links</h3>
                  <ul class="footer-links__list">
                      <li><a href="/about/">About this website</a></li>
                      <li><a target="_blank" href="https://github.com/tbreuss/mithril-by-examples">GitHub Repository</a></li>
                  </ul>
              </div>
          </div>
          <hr class="footer-ruler">
          <div class="pure-g">
              <div class="pure-u-1 footer-copyright">
                  A tiny <a target="_blank" href="https://www.tebe.ch">tebe.ch</a> project
              </div>
          </div>
      </div>
  </div>
  <!-- Current page: /examples/css-animation-on-element-removal/ -->
  </body>
  <script src="/css/highlight/highlight.min.js?v=1646565642"></script>
  <script src="/js/main.js?v=1646565642"></script>
</html>
