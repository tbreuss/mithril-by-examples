<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="google-site-verification" content="4spLhTDINzdede85HIlvHd0YVnKLKeP1Xw4FnIUaT1Q" />
    <title>Highchart Stream Example | Mithril.js by Examples</title>
    <link rel="stylesheet" href="/css/index.css?v=1643923829">
    <link rel="stylesheet" href="/css/highlight/styles/atom-one-dark.min.css?v=1643923829">
    <link rel="stylesheet" href="/css/modal.css?v=1643923829">
    <script src="https://flems.io/flems.html" type="text/javascript" charset="utf-8"></script>
  </head>
  <body>
    <header>
      <h1 class="home"><a href="/">Mithril by Examples</a></h1>
      <ul class="nav">
        <li class="nav-item nav-item-active"><a href="/examples/">Examples</a></li>
        <li class="nav-item"><a href="/tags/">Tags</a></li>
        <li class="nav-item"><a href="/contributors/">Contributors</a></li>
        <li class="nav-item"><a href="/search/">Search</a></li>
        <li class="nav-item"><a href="/about/">About</a></li>
      </ul>
    </header>
    <main class="content tmpl-post">
      <h1>Highchart Stream Example</h1>

<p>
  <time datetime="2021-10-26">26 October 2021</time><span class="author">
    by&nbsp;<span class="author"><a href="/contributors/skyghis/">skyghis</a></span>
  </span>
</p>
<p style="margin-top:-1em">Level: <span class="level">expert</span> â€¢ Mithril Version: <span class="version">2.0.4</span>
</p>

<p><a href="/tags/3rd-party/" class="post-tag">3rd-party</a><a href="/tags/charts/" class="post-tag">charts</a><a href="/tags/dom/" class="post-tag">dom</a><a href="/tags/m.mount/" class="post-tag">m.mount</a><a href="/tags/m.request/" class="post-tag">m.request</a><a href="/tags/m.stream/" class="post-tag">m.stream</a><a href="/tags/oncreate/" class="post-tag">oncreate</a><a href="/tags/onremove/" class="post-tag">onremove</a>
</p>

<div class="toc">
        <h2 class="toc__heading">Contents</h2>
        <ol class="toc__list"><li class="toc__item"><a clas="toc__link" href="#dependencies">Dependencies</a></li><li class="toc__item"><a clas="toc__link" href="#javascript">JavaScript</a></li></ol>
    </div><p>How to use highchart lib together with mithril and mithril-stream.</p>
<p>The code sample was authored by skyghis. It was last modified on 26 October 2021.</p>
<p>The snippet requires the latest version 2.0.4 of Mithril JS framework.
As an expert user, who is familiar with all the aspects of Mithril and JS itself, you are able the follow the example easily.</p>
<p>In this example we can see some <a href="/api-methods/">Mithril API methods</a> like <code>m.stream</code>, <code>m.request</code> or <code>m.mount</code>, besides Mithril's basic m() hyperscript function.
It also demonstrates, how Mithril's <a href="/lifecycle-methods/">lifecycle methods</a> (aka hooks) like <code>onremove</code> and <code>oncreate</code> can be used.</p>
<p>Ready? Here we go!</p>



      <div class="modal-container">
        <label for="modal" class="example-label">Show Live Example in Flems</label>
        <label for="modal" class="modal-background"></label>
        <input type="checkbox" id="modal">
        <div class="modal">
          <div class="modal-header">
            <h3>Highchart Stream Example</h3>
            <label for="modal">
                <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAAdVBMVEUAAABNTU1NTU1NTU1NTU1NTU1NTU1NTU1NTU1NTU1NTU1NTU1NTU1NTU1NTU1NTU1NTU1NTU1NTU1NTU1NTU1NTU1NTU1NTU1NTU1NTU1NTU1NTU1NTU1NTU1NTU1NTU1NTU1NTU1NTU1NTU1NTU1NTU1NTU0N3NIOAAAAJnRSTlMAAQIDBAUGBwgRFRYZGiEjQ3l7hYaqtLm8vsDFx87a4uvv8fP1+bbY9ZEAAAB8SURBVBhXXY5LFoJAAMOCIP4VBRXEv5j7H9HFDOizu2TRFljedgCQHeocWHVaAWStXnKyl2oVWI+kd1XLvFV1D7Ng3qrWKYMZ+MdEhk3gbhw59KvlH0eTnf2mgiRwvQ7NW6aqNmncukKhnvo/zzlQ2PR/HgsAJkncH6XwAcr0FUY5BVeFAAAAAElFTkSuQmCC" width="16" height="16" alt="">
            </label>
          </div>
          <div id="flems" class="modal-body"></div>
        </div>
      </div>
      <script>
      Flems(document.getElementById("flems"), {
        selected: '.js',
        files: [{"name":"app.js","content":"// app.js\nfunction Chart() {\n  let chart;\n  let dataStream;\n\n  return {\n    view: () => m(\"\"),\n    oncreate: ({attrs: {data}, dom}) => {\n      chart = Highcharts.chart(dom, data());\n      dataStream = data.map((options) => chart.update(options, true));\n    },\n    onremove: () => chart && chart.destroy()\n  };\n};\n\nconst model = {\n  serie1: m.stream([]),\n  serie2: m.stream([])\n};\n\nconst actions = {\n  clear: () => {\n    model.serie1([]);\n    model.serie2([]);\n  },\n  query: {\n    data1: () => {\n      const rnd = Math.random();\n      m.request(\"https://raw.githubusercontent.com/highcharts/highcharts/master/samples/data/aapl-c.json\")\n        .then((data)  => data.map(([x, y]) => [x, (y / 100) - rnd]))\n        .then((data) => model.serie1(data));\n    },\n    data2: () => {\n      const rnd = Math.random();\n      m.request(\"https://cdn.rawgit.com/highcharts/highcharts/master/samples/data/usdeur.json\")\n        .then((data)  => data.map(([x, y]) => [x, y + rnd]))\n        .then((data) => model.serie2(data))\n    }\n  }\n}\n\nm.mount(document.body, {\n  view: () => [\n    m(\"\", [\n      m(\"input[type=button][value=load serie 1]\", {onclick: actions.query.data1}),\n      m(\"input[type=button][value=load serie 2]\", {onclick: actions.query.data2}),\n      m(\"input[type=button][value=clear]\", {onclick: actions.clear}),\n    ]),\n    m(Chart, {data: model.serie1.map((data) => ({\n      xAxis: {type: \"datetime\"},\n      series: [{name: \"serie 1\", data: data}]\n    }))}),\n    m(Chart, {data: m.stream.merge([model.serie1, model.serie2]).map(([data1, data2]) => ({\n      xAxis: {type: \"datetime\"},\n      series: [\n        {id: 1, name: \"serie 1\", data: data1},\n        {id: 2, name: \"serie 2\", data: data2}\n      ]\n    }))})\n  ]\n});\n"}],
        links: [{"name":"mithril@2.0.4","type":"script","url":"https://unpkg.com/mithril@2.0.4"},{"name":"mithril@2.0.4/stream/stream.js","type":"script","url":"https://unpkg.com/mithril@2.0.4/stream/stream.js"},{"name":"highcharts@6.1.1","type":"script","url":"https://unpkg.com/highcharts@6.1.1"}]
      });
      </script>
    
        <div class="dependencies">
          <h2 id="dependencies" class="dependencies__heading" tabindex="-1">Dependencies</h2>
          <div class="dependencies__tableWrap">
            <table class="dependencies__table dependencies__table--3">
                <thead>
                    <tr>
                        <th>Type</th>
                        <th>Name</th>
                        <th>URL</th>
                    </tr>
                </thead>
                <tbody>
                <tr><td class="capitalize">script</td><td>mithril@2.0.4</td><td>https://unpkg.com/mithril@2.0.4</td></tr>,<tr><td class="capitalize">script</td><td>mithril@2.0.4/stream/stream.js</td><td>https://unpkg.com/mithril@2.0.4/stream/stream.js</td></tr>,<tr><td class="capitalize">script</td><td>highcharts@6.1.1</td><td>https://unpkg.com/highcharts@6.1.1</td></tr>
                </tbody>
            </table>
          </div>
        </div>
        <style>
        .dependencies {
            color: #282c34;
            margin-bottom: 2rem;
        }
        .dependencies__tableWrap {
            background-color: #282c34;
            display: block;
            overflow-x: auto;
        }
        /* strange things happen here */
        .dependencies__table {
            margin: -1rem 0 0 0 !important;
            padding: 1em;
        }
        .dependencies__table--1 {
            margin-top: 0 !important;
        }
        .dependencies__table th, .dependencies__table td {
            color: #abb2bf;
            font-family: Consolas, Menlo, Monaco, "Andale Mono WT", "Andale Mono", "Lucida Console", "Lucida Sans Typewriter", "DejaVu Sans Mono", "Bitstream Vera Sans Mono", "Liberation Mono", "Nimbus Mono L", "Courier New", Courier, monospace;
            font-size: 14px;
        }
        .dependencies__table th {
          text-align: left;
        }
        .capitalize {
            text-transform: capitalize;
        }
        </style>
      

<h2 id="javascript" tabindex="-1">JavaScript <a class="direct-link" href="#javascript" aria-hidden="true">#</a></h2>
<pre><code class="language-js">// app.js
function Chart() {
  let chart;
  let dataStream;

  return {
    view: () =&gt; m(&quot;&quot;),
    oncreate: ({attrs: {data}, dom}) =&gt; {
      chart = Highcharts.chart(dom, data());
      dataStream = data.map((options) =&gt; chart.update(options, true));
    },
    onremove: () =&gt; chart &amp;&amp; chart.destroy()
  };
};

const model = {
  serie1: m.stream([]),
  serie2: m.stream([])
};

const actions = {
  clear: () =&gt; {
    model.serie1([]);
    model.serie2([]);
  },
  query: {
    data1: () =&gt; {
      const rnd = Math.random();
      m.request(&quot;https://raw.githubusercontent.com/highcharts/highcharts/master/samples/data/aapl-c.json&quot;)
        .then((data)  =&gt; data.map(([x, y]) =&gt; [x, (y / 100) - rnd]))
        .then((data) =&gt; model.serie1(data));
    },
    data2: () =&gt; {
      const rnd = Math.random();
      m.request(&quot;https://cdn.rawgit.com/highcharts/highcharts/master/samples/data/usdeur.json&quot;)
        .then((data)  =&gt; data.map(([x, y]) =&gt; [x, y + rnd]))
        .then((data) =&gt; model.serie2(data))
    }
  }
}

m.mount(document.body, {
  view: () =&gt; [
    m(&quot;&quot;, [
      m(&quot;input[type=button][value=load serie 1]&quot;, {onclick: actions.query.data1}),
      m(&quot;input[type=button][value=load serie 2]&quot;, {onclick: actions.query.data2}),
      m(&quot;input[type=button][value=clear]&quot;, {onclick: actions.clear}),
    ]),
    m(Chart, {data: model.serie1.map((data) =&gt; ({
      xAxis: {type: &quot;datetime&quot;},
      series: [{name: &quot;serie 1&quot;, data: data}]
    }))}),
    m(Chart, {data: m.stream.merge([model.serie1, model.serie2]).map(([data1, data2]) =&gt; ({
      xAxis: {type: &quot;datetime&quot;},
      series: [
        {id: 1, name: &quot;serie 1&quot;, data: data1},
        {id: 2, name: &quot;serie 2&quot;, data: data2}
      ]
    }))})
  ]
});
</code></pre>


<p>Do you see some improvements, that could be addressed here? Then let me know by <a href="https://github.com/tbreuss/mithril-by-examples/issues">opening an issue</a>.
As an alternative, you can fork the repository on GitHub, push your commits and send a pull request.
To start your work, click on the edit link below. Thank you for contributing to this repo.</p>


<p style="margin-top:2rem;">
  <a href="/examples/">See more code examples</a>
  &nbsp;|&nbsp; <a target="_blank" href="https://github.com/tbreuss/mithril-by-examples/blob/main/./examples/highchart-stream-example.md">Edit this example on GitHub</a>
</p>

    </main>
    <footer></footer>
    <!-- Current page: /examples/highchart-stream-example/ -->
  </body>
  <script src="/css/highlight/highlight.min.js"></script>
  <script>hljs.highlightAll();</script>
</html>
