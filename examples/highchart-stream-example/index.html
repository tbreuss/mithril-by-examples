<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="google-site-verification" content="4spLhTDINzdede85HIlvHd0YVnKLKeP1Xw4FnIUaT1Q" />
    <title>Highchart Stream Example | Mithril.js by Examples</title>
    <link rel="stylesheet" href="/css/pure-min.css?v=1670081556">
    <link rel="stylesheet" href="/css/grids-responsive-min.css?v=1670081556">
    <link rel="stylesheet" href="/css/styles.css?v=1670081556">
    <link rel="stylesheet" href="/css/highlight/styles/atom-one-dark.min.css?v=1670081556">
    <script src="https://flems.io/flems.html" type="text/javascript" charset="utf-8"></script>
  </head>
  <body>
    <div class="header">
      <div class="container">
        <div class="pure-g custom-wrapper" id="menu">
            <div class="pure-u-1 pure-u-md-1-3">
              <div class="pure-menu">
                <a class="pure-menu-heading custom-brand" href="/"><img src="https://mithril.js.org/logo.svg" alt="">Mithril.js by Examples</a>
                <a href="#" class="custom-toggle" id="toggle"><s class="bar"></s><s class="bar"></s></a>
              </div>
            </div>
            <div class="pure-u-1 pure-u-md-2-3">
                <div class="pure-menu pure-menu-horizontal custom-can-transform">
                    <ul class="pure-menu-list">
                        <li class="pure-menu-item pure-menu-selected"><a class="pure-menu-link" href="/examples/">Examples</a></li>
                        <li class="pure-menu-item"><a class="pure-menu-link" href="/tags/">Tags</a></li>
                        <li class="pure-menu-item"><a class="pure-menu-link" href="/contributors/">Contributors</a></li>
                        <li class="pure-menu-item"><a class="pure-menu-link" href="/search/">Search</a></li>
                      </ul>
                </div>
            </div>
        </div>
    </div>
  </div>
    <div class="container content">
  <div class="pure-g">
      <div class="pure-u-1">

        <h1>Highchart Stream Example</h1>

        <p class="no-margin-bottom">
          <time datetime="2021-10-26">26 October 2021</time><span class="author">
            by&nbsp;<span class="author"><a href="/contributors/skyghis/">skyghis</a></span>
          </span>
        </p>
        <p class="no-margin-bottom">Level: <span class="level">expert</span> • Mithril.js Version: <span class="version">latest</span>
        </p>

        <p>
          
          
          <a href="/tags/3rd-party/" class="post-tag">3rd-party</a>
          
          
          <a href="/tags/charts/" class="post-tag">charts</a>
          
          
          <a href="/tags/dom/" class="post-tag">dom</a>
          
          
          <a href="/tags/m.mount/" class="post-tag">m.mount</a>
          
          
          <a href="/tags/m.request/" class="post-tag">m.request</a>
          
          
          <a href="/tags/m.stream/" class="post-tag">m.stream</a>
          
          
          <a href="/tags/oncreate/" class="post-tag">oncreate</a>
          
          
          <a href="/tags/onremove/" class="post-tag">onremove</a>
          
        </p>

        <div class="toc">
        <h2 class="toc__heading">Contents</h2>
        <ol class="toc__list"><li class="toc__item"><a clas="toc__link" href="#live-example">Live Example</a></li><li class="toc__item"><a clas="toc__link" href="#dependencies">Dependencies</a></li><li class="toc__item"><a clas="toc__link" href="#javascript">JavaScript</a></li><li class="toc__item"><a clas="toc__link" href="#contribute">Contribute</a></li></ol>
    </div>

        <p>This example shows how to use 3rd party libraries together with Mithril.js and mithril-stream.
The external library here is <a href="highcharts.js">https://www.highcharts.com/</a> besides Mithril.js' own stream library.
In the demo two charts and three buttons are rendered, that can be used to interact with the rendered charts.</p>

      <h2 id="live-example">Live Example <a class="direct-link" href="#live-example" aria-hidden="true">#</a></h2>
      <div id="flems"></div>
      <script>
      Flems(document.getElementById("flems"), {
        middle: 0,
        resizable: false,
        editable: true,
        toolbar: true,
        autoHeight: false,
        selected: '.js',
        files: [{"name":"app.js","content":"// app.js\nfunction Chart() {\n  let chart;\n  let dataStream;\n\n  return {\n    view: () => m(\"\"),\n    oncreate: ({attrs: {data}, dom}) => {\n      chart = Highcharts.chart(dom, data());\n      dataStream = data.map((options) => chart.update(options, true));\n    },\n    onremove: () => chart && chart.destroy()\n  };\n};\n\nconst model = {\n  serie1: m.stream([]),\n  serie2: m.stream([])\n};\n\nconst actions = {\n  clear: () => {\n    model.serie1([]);\n    model.serie2([]);\n  },\n  query: {\n    data1: () => {\n      const rnd = Math.random();\n      m.request(\"https://raw.githubusercontent.com/highcharts/highcharts/master/samples/data/aapl-c.json\")\n        .then((data)  => data.map(([x, y]) => [x, (y / 100) - rnd]))\n        .then((data) => model.serie1(data));\n    },\n    data2: () => {\n      const rnd = Math.random();\n      m.request(\"https://cdn.rawgit.com/highcharts/highcharts/master/samples/data/usdeur.json\")\n        .then((data)  => data.map(([x, y]) => [x, y + rnd]))\n        .then((data) => model.serie2(data))\n    }\n  }\n}\n\nm.mount(document.body, {\n  view: () => [\n    m(\"\", [\n      m(\"input[type=button][value=load serie 1]\", {onclick: actions.query.data1}),\n      m(\"input[type=button][value=load serie 2]\", {onclick: actions.query.data2}),\n      m(\"input[type=button][value=clear]\", {onclick: actions.clear}),\n    ]),\n    m(Chart, {data: model.serie1.map((data) => ({\n      xAxis: {type: \"datetime\"},\n      series: [{name: \"serie 1\", data: data}]\n    }))}),\n    m(Chart, {data: m.stream.merge([model.serie1, model.serie2]).map(([data1, data2]) => ({\n      xAxis: {type: \"datetime\"},\n      series: [\n        {id: 1, name: \"serie 1\", data: data1},\n        {id: 2, name: \"serie 2\", data: data2}\n      ]\n    }))})\n  ]\n});\n"}],
        links: [{"name":"mithril@latest","type":"script","url":"https://unpkg.com/mithril@latest"},{"name":"mithril@latest/stream/stream.js","type":"script","url":"https://unpkg.com/mithril@latest/stream/stream.js"},{"name":"highcharts@6.1.1","type":"script","url":"https://unpkg.com/highcharts@6.1.1"}]
      });
      </script>
    
        <div class="dependencies">
          <h2 id="dependencies" class="dependencies__heading" tabindex="-1">Dependencies <a class="direct-link" href="#dependencies" aria-hidden="true">#</a></h2>
          <div class="dependencies__tableWrap">
            <table class="dependencies__table dependencies__table--3">
                <thead>
                    <tr>
                        <th>Type</th>
                        <th>Name</th>
                        <th>URL</th>
                    </tr>
                </thead>
                <tbody>
                <tr><td class="capitalize">script</td><td>mithril@latest</td><td>https://unpkg.com/mithril@latest</td></tr>,<tr><td class="capitalize">script</td><td>mithril@latest/stream/stream.js</td><td>https://unpkg.com/mithril@latest/stream/stream.js</td></tr>,<tr><td class="capitalize">script</td><td>highcharts@6.1.1</td><td>https://unpkg.com/highcharts@6.1.1</td></tr>
                </tbody>
            </table>
          </div>
        </div>
      <h2 id="javascript" tabindex="-1">JavaScript <a class="direct-link" href="#javascript" aria-hidden="true">#</a></h2>
<pre><code class="language-js">// app.js
function Chart() {
  let chart;
  let dataStream;

  return {
    view: () =&gt; m(&quot;&quot;),
    oncreate: ({attrs: {data}, dom}) =&gt; {
      chart = Highcharts.chart(dom, data());
      dataStream = data.map((options) =&gt; chart.update(options, true));
    },
    onremove: () =&gt; chart &amp;&amp; chart.destroy()
  };
};

const model = {
  serie1: m.stream([]),
  serie2: m.stream([])
};

const actions = {
  clear: () =&gt; {
    model.serie1([]);
    model.serie2([]);
  },
  query: {
    data1: () =&gt; {
      const rnd = Math.random();
      m.request(&quot;https://raw.githubusercontent.com/highcharts/highcharts/master/samples/data/aapl-c.json&quot;)
        .then((data)  =&gt; data.map(([x, y]) =&gt; [x, (y / 100) - rnd]))
        .then((data) =&gt; model.serie1(data));
    },
    data2: () =&gt; {
      const rnd = Math.random();
      m.request(&quot;https://cdn.rawgit.com/highcharts/highcharts/master/samples/data/usdeur.json&quot;)
        .then((data)  =&gt; data.map(([x, y]) =&gt; [x, y + rnd]))
        .then((data) =&gt; model.serie2(data))
    }
  }
}

m.mount(document.body, {
  view: () =&gt; [
    m(&quot;&quot;, [
      m(&quot;input[type=button][value=load serie 1]&quot;, {onclick: actions.query.data1}),
      m(&quot;input[type=button][value=load serie 2]&quot;, {onclick: actions.query.data2}),
      m(&quot;input[type=button][value=clear]&quot;, {onclick: actions.clear}),
    ]),
    m(Chart, {data: model.serie1.map((data) =&gt; ({
      xAxis: {type: &quot;datetime&quot;},
      series: [{name: &quot;serie 1&quot;, data: data}]
    }))}),
    m(Chart, {data: m.stream.merge([model.serie1, model.serie2]).map(([data1, data2]) =&gt; ({
      xAxis: {type: &quot;datetime&quot;},
      series: [
        {id: 1, name: &quot;serie 1&quot;, data: data1},
        {id: 2, name: &quot;serie 2&quot;, data: data2}
      ]
    }))})
  ]
});
</code></pre>
<p>The snippet requires the latest version of Mithril.js framework.
As an expert user, who is familiar with all the aspects of Mithril.js and JavaScript itself, you are able the follow the example easily.</p>
<p>In this example we can see some <a href="/api-methods/">Mithril.js API methods</a> like <code>m.stream</code>, <code>m.request</code> or <code>m.mount</code>, besides Mithril.js' basic m() hyperscript function.
It also demonstrates, how Mithril.js' <a href="/lifecycle-methods/">lifecycle methods</a> (aka hooks) like <code>onremove</code> and <code>oncreate</code> can be used.</p>
<p>The code sample was authored by skyghis. It was last modified on 26 October 2021.</p>


        <h2 id="contribute" tabindex="-1">Contribute <a class="direct-link" href="#contribute" aria-hidden="true">#</a></h2>
<p>Do you see some improvements, that could be addressed here? Then let me know by <a href="https://github.com/tbreuss/mithril-by-examples/issues">opening an issue</a>.
As an alternative, you can fork the repository on GitHub, push your commits and send a pull request.
To start your work, click on the edit link below. Thank you for contributing to this repo.</p>


        <p style="margin-top:3.2rem;">
          <a href="/examples/">See more code examples</a>
          &nbsp;•&nbsp; <a target="_blank" href="https://github.com/tbreuss/mithril-by-examples/blob/main/./examples/highchart-stream-example.md">Edit this example on GitHub</a>
        </p>

    </div>
  </div>
</div>

    <div class="footer">
      <div class="container">
          <div class="pure-g">
              <div class="pure-u-1 pure-u-md-3-5 footer-about">
                  <h3 class="footer-about__heading">Mithril.js by Examples</h3>
                  <p class="footer-about__text">The missing addition to Mithril.js' website with many up-to-date code examples that are often searched for and just work.</p>
              </div>
              <div class="pure-u-1-2 pure-u-md-1-5 footer-tools">
                <h3 class="footer-tools__heading">Toolset</h3>
                <ul class="footer-tools__list">
                    <li><a target="_blank" href="https://www.11ty.dev">Eleventy</a></li>
                    <li><a target="_blank" href="http://purecss.io">Pure.css</a></li>
                    <li><a target="_blank" href="https://flems.io">Flems.io</a></li>
                    <li><a target="_blank" href="http://mithril.js.org">Mithril.js</a></li>
                </ul>
            </div>
              <div class="pure-u-1-2 pure-u-md-1-5 footer-links">
                  <h3 class="footer-links__heading">Links</h3>
                  <ul class="footer-links__list">
                      <li><a href="/about/">About this website</a></li>
                      <li><a target="_blank" href="https://github.com/tbreuss/mithril-by-examples">GitHub Repository</a></li>
                  </ul>
              </div>
          </div>
          <hr class="footer-ruler">
          <div class="pure-g">
              <div class="pure-u-1 footer-copyright">
                  A tiny <a target="_blank" href="https://www.tebe.ch">tebe.ch</a> project
              </div>
          </div>
      </div>
  </div>
  <!-- Current page: /examples/highchart-stream-example/ -->
  </body>
  <script src="/css/highlight/highlight.min.js?v=1670081556"></script>
  <script src="/js/main.js?v=1670081556"></script>
</html>
