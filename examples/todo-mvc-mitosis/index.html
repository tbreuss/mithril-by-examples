<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="google-site-verification" content="4spLhTDINzdede85HIlvHd0YVnKLKeP1Xw4FnIUaT1Q" />
    <title>Todo MVC (Mitosis) | Mithril.js by Examples</title>
    <link rel="stylesheet" href="/css/pure-min.css?v=1646565642">
    <link rel="stylesheet" href="/css/grids-responsive-min.css?v=1646565642">
    <link rel="stylesheet" href="/css/styles.css?v=1646565642">
    <link rel="stylesheet" href="/css/highlight/styles/atom-one-dark.min.css?v=1646565642">
    <script src="https://flems.io/flems.html" type="text/javascript" charset="utf-8"></script>
  </head>
  <body>
    <div class="header">
      <div class="container">
        <div class="pure-g custom-wrapper" id="menu">
            <div class="pure-u-1 pure-u-md-1-3">
              <div class="pure-menu">
                <a class="pure-menu-heading custom-brand" href="/"><img src="https://mithril.js.org/logo.svg" alt="">Mithril.js by Examples</a>
                <a href="#" class="custom-toggle" id="toggle"><s class="bar"></s><s class="bar"></s></a>
              </div>
            </div>
            <div class="pure-u-1 pure-u-md-2-3">
                <div class="pure-menu pure-menu-horizontal custom-can-transform">
                    <ul class="pure-menu-list">
                        <li class="pure-menu-item pure-menu-selected"><a class="pure-menu-link" href="/examples/">Examples</a></li>
                        <li class="pure-menu-item"><a class="pure-menu-link" href="/tags/">Tags</a></li>
                        <li class="pure-menu-item"><a class="pure-menu-link" href="/contributors/">Contributors</a></li>
                        <li class="pure-menu-item"><a class="pure-menu-link" href="/search/">Search</a></li>
                      </ul>
                </div>
            </div>
        </div>
    </div>
  </div>
    <div class="container content">
  <div class="pure-g">
      <div class="pure-u-1">

        <h1>Todo MVC (Mitosis)</h1>

        <p class="no-margin-bottom">
          <time datetime="2021-10-29">29 October 2021</time><span class="author">
            by&nbsp;<span class="author"><a href="/contributors/osban/">osban</a></span>
          </span>
        </p>
        <p class="no-margin-bottom">Level: <span class="level">expert</span> • Mithril.js Version: <span class="version">2.0.4</span>
        </p>

        <p>
          
          
          <a href="/tags/dom/" class="post-tag">dom</a>
          
          
          <a href="/tags/m.route/" class="post-tag">m.route</a>
          
          
          <a href="/tags/mitosis/" class="post-tag">mitosis</a>
          
          
          <a href="/tags/onupdate/" class="post-tag">onupdate</a>
          
          
          <a href="/tags/todomvc/" class="post-tag">todomvc</a>
          
        </p>

        <div class="toc">
        <h2 class="toc__heading">Contents</h2>
        <ol class="toc__list"><li class="toc__item"><a clas="toc__link" href="#live-example">Live Example</a></li><li class="toc__item"><a clas="toc__link" href="#dependencies">Dependencies</a></li><li class="toc__item"><a clas="toc__link" href="#markup">Markup</a></li><li class="toc__item"><a clas="toc__link" href="#model.js">Model.js</a></li><li class="toc__item"><a clas="toc__link" href="#actions.js">Actions.js</a></li><li class="toc__item"><a clas="toc__link" href="#header.js">Header.js</a></li><li class="toc__item"><a clas="toc__link" href="#main.js">Main.js</a></li><li class="toc__item"><a clas="toc__link" href="#footer.js">Footer.js</a></li><li class="toc__item"><a clas="toc__link" href="#app.js">App.js</a></li><li class="toc__item"><a clas="toc__link" href="#css">CSS</a></li><li class="toc__item"><a clas="toc__link" href="#contribute">Contribute</a></li></ol>
    </div>

        <p>Here is another TodoMVC implementation, this time using Mitosis for state management, see <code>actions.js</code> and <code>models.js</code>.
As a realistic but still simple application example it shows Mithril.js' most used concepts, methods and lifecycle methodes.</p>

      <h2 id="live-example">Live Example <a class="direct-link" href="#live-example" aria-hidden="true">#</a></h2>
      <div id="flems"></div>
      <script>
      Flems(document.getElementById("flems"), {
        middle: 0,
        resizable: false,
        editable: true,
        toolbar: true,
        autoHeight: false,
        selected: '.js',
        files: [{"name":".html","content":"<body>\n<section class=\"todoapp\"></section>\n<footer class=\"info\">\n  <p>Double-click to edit a todo</p>\n  <p>Created by <a href=\"http://todomvc.com\">people</a></p>\n  <p>Part of <a href=\"http://todomvc.com\">TodoMVC</a></p>\n</footer>\n<!-- Scripts here. Don't remove ↓ -->\n<!-- <script src=\"node_modules/todomvc-common/base.js\"></script>-->\n<!-- <script src=\"js/app.js\"></script>-->\n</body>\n"},{"name":"model.js","content":"// model.js\nconst model = () => ({\n  todos: [],\n  filters: [\n    {filter: 'All', text: 'All'},\n    {filter: false, text: 'Active'},\n    {filter: true,  text: 'Completed'}\n  ],\n  filter: 'All',\n  all: true,\n  enter: 13\n})\n\nexport default model\n"},{"name":"actions.js","content":"// actions.js\nconst actions = (M, A = {\n  init: () => {M.todos = JSON.parse(localStorage.getItem('todos-mithril')) || []},\n  save: () => localStorage.setItem('todos-mithril', JSON.stringify(M.todos)),\n  change: (a,b,c) => {\n    void {\n      push: x => M.todos.push({...x}),\n      done: x => {\n        if (x === 'all') {\n          M.todos.forEach(y => y.completed = M.all)\n          M.all = !M.all\n        }\n        else M.todos[x].completed = !M.todos[x].completed\n      },\n      clear: () => {\n        M.todos = M.todos.filter(x => !x.completed)\n        M.all = true\n      },\n      splice: i => M.todos.splice(i,1),\n      blur: (i, todo) => M.todos[i] = {...todo}\n    }[a](b,c)\n\n    A.save()\n  },\n  setfil: fil => M.filter = fil\n}) => A\n\nexport default actions\n"},{"name":"header.js","content":"// header.js\nconst header = () => {\n  let todon = {}\n\n  const add = A => {\n    todon.id = Date.now()\n    todon.title.trim()\n    todon.completed = false\n    A.change('push', todon)\n    todon = {}\n  }\n\n  return {\n    view: ({attrs: {M,A}}) =>\n      m('header.header',\n        m('h1', 'todos'),\n        m('input.new-todo', {\n          autofocus: true,\n          placeholder: 'What needs to be done?',\n          oninput: e => todon.title = e.target.value,\n          onkeydown: e => {if (e.keyCode === M.enter && e.target.value.trim()) add(A)},\n          value: todon.title\n        })\n      )\n  }\n}\n\nexport default header\n"},{"name":"main.js","content":"// main.js\nconst main = () => {\n  const escape = 27\n  let todo = {}\n\n  return {\n    view: ({attrs: {M,A}}) =>\n      m('section.main',\n        m('input.toggle-all', {\n          id: 'toggle-all',\n          type: 'checkbox',\n          checked: M.todos.every(x => x.completed)\n        }),\n        m('label', {\n          for: 'toggle-all',\n          onclick: () => A.change('done', 'all')\n        }, 'Mark all as complete'),\n        M.todos\n          .filter(x => M.filter === 'All' ? x : x.completed === M.filter)\n          .map((x,i) =>\n            m('ul.todo-list',\n              m('li', {\n                  class: `${x.completed ? 'completed' : 'active'} ${x.id === todo.id && 'editing'}`,\n                },\n                m('.view',\n                  m('input.toggle', {\n                    type: 'checkbox',\n                    checked: x.completed,\n                    onchange: () => A.change('done', i)\n                  }),\n                  m('label', {ondblclick: () => todo = {...x}}, x.title),\n                  m('button.destroy', {\n                    onclick: () => A.change('splice', i)\n                  })\n                ),\n                m('input.edit', {\n                  onupdate: ({dom}) => dom.focus(),\n                  oninput: e => todo.title = e.target.value,\n                  onblur: e => {\n                    if (Object.keys(todo).length) {\n                      if (!todo.title.trim()) {\n                        A.change('splice', i)\n                        todo = {}\n                      }\n                      else {\n                        A.change('blur', i, todo)\n                        todo = {}\n                      }\n                    }\n                  },\n                  onkeydown: e => {\n                    if (e.keyCode === M.enter) e.target.blur()\n                    else if (e.keyCode === escape) todo = {}\n                  },\n                  value: todo.title\n                })\n              )\n            )\n          )\n      )\n  }\n}\n\nexport default main\n"},{"name":"footer.js","content":"// footer.js\nconst footer = () => {\n  const left = M => M.todos.filter(x => !x.completed).length\n\n  return {\n    view: ({attrs: {M,A}}) =>\n      m('footer.footer',\n        m('span.todo-count',\n          m('strong', left(M)), ` item${left(M) === 1 ? '' : 's'} left`\n        ),\n        m('ul.filters',\n          M.filters.map(x =>\n            m('li',\n              m('a', {\n                class: M.filter === x.filter && 'selected',\n                onclick: () => {A.setfil(x.filter); m.route.set('/' + x.text)}\n              }, x.text)\n            )\n          )\n        ),\n        M.todos.some(x => x.completed) &&\n        m('button.clear-completed', {\n          onclick: () => A.change('clear')\n        }, 'Clear completed')\n      )\n  }\n}\n\nexport default footer\n"},{"name":"app.js","content":"// app.js\nimport model   from './model'\nimport actions from './actions'\nimport header  from './header'\nimport main    from './main'\nimport footer  from './footer'\n\nconst app = () => {\n  const M = model()\n  const A = actions(M)\n\n  A.init()\n\n  return {\n    view: () => [\n      m(header, {M,A}),\n      M.todos.length > 0 && m(main, {M,A}),\n      M.todos.length > 0 && m(footer, {M,A})\n    ]\n  }\n}\n\nm.route(document.querySelector('.todoapp'), '/All', {'/:filter': app})\n"},{"name":".css","content":"html,\nbody {\n  margin: 0;\n  padding: 0;\n}\n\nbutton {\n  margin: 0;\n  padding: 0;\n  border: 0;\n  background: none;\n  font-size: 100%;\n  vertical-align: baseline;\n  font-family: inherit;\n  font-weight: inherit;\n  color: inherit;\n  -webkit-appearance: none;\n  appearance: none;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\nbody {\n  font: 14px 'Helvetica Neue', Helvetica, Arial, sans-serif;\n  line-height: 1.4em;\n  background: #f5f5f5;\n  color: #4d4d4d;\n  min-width: 230px;\n  max-width: 550px;\n  margin: 0 auto;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  font-weight: 300;\n}\n\n:focus {\n  outline: 0;\n}\n\n.hidden {\n  display: none;\n}\n\n.todoapp {\n  background: #fff;\n  margin: 130px 0 40px 0;\n  position: relative;\n  box-shadow: 0 2px 4px 0 rgba(0, 0, 0, 0.2),\n  0 25px 50px 0 rgba(0, 0, 0, 0.1);\n}\n\n.todoapp input::-webkit-input-placeholder {\n  font-style: italic;\n  font-weight: 300;\n  color: #e6e6e6;\n}\n\n.todoapp input::-moz-placeholder {\n  font-style: italic;\n  font-weight: 300;\n  color: #e6e6e6;\n}\n\n.todoapp input::input-placeholder {\n  font-style: italic;\n  font-weight: 300;\n  color: #e6e6e6;\n}\n\n.todoapp h1 {\n  position: absolute;\n  top: -155px;\n  width: 100%;\n  font-size: 100px;\n  font-weight: 100;\n  text-align: center;\n  color: rgba(175, 47, 47, 0.15);\n  -webkit-text-rendering: optimizeLegibility;\n  -moz-text-rendering: optimizeLegibility;\n  text-rendering: optimizeLegibility;\n}\n\n.new-todo,\n.edit {\n  position: relative;\n  margin: 0;\n  width: 100%;\n  font-size: 24px;\n  font-family: inherit;\n  font-weight: inherit;\n  line-height: 1.4em;\n  border: 0;\n  color: inherit;\n  padding: 6px;\n  border: 1px solid #999;\n  box-shadow: inset 0 -1px 5px 0 rgba(0, 0, 0, 0.2);\n  box-sizing: border-box;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\n.new-todo {\n  padding: 16px 16px 16px 60px;\n  border: none;\n  background: rgba(0, 0, 0, 0.003);\n  box-shadow: inset 0 -2px 1px rgba(0,0,0,0.03);\n}\n\n.main {\n  position: relative;\n  z-index: 2;\n  border-top: 1px solid #e6e6e6;\n}\n\n.toggle-all {\n  width: 1px;\n  height: 1px;\n  border: none; /* Mobile Safari */\n  opacity: 0;\n  position: absolute;\n  right: 100%;\n  bottom: 100%;\n}\n\n.toggle-all + label {\n  width: 60px;\n  height: 34px;\n  font-size: 0;\n  position: absolute;\n  top: -52px;\n  left: -13px;\n  -webkit-transform: rotate(90deg);\n  transform: rotate(90deg);\n}\n\n.toggle-all + label:before {\n  content: '❯';\n  font-size: 22px;\n  color: #e6e6e6;\n  padding: 10px 27px 10px 27px;\n}\n\n.toggle-all:checked + label:before {\n  color: #737373;\n}\n\n.todo-list {\n  margin: 0;\n  padding: 0;\n  list-style: none;\n}\n\n.todo-list li {\n  position: relative;\n  font-size: 24px;\n  border-bottom: 1px solid #ededed;\n}\n\n.todo-list li:last-child {\n  border-bottom: none;\n}\n\n.todo-list li.editing {\n  border-bottom: none;\n  padding: 0;\n}\n\n.todo-list li.editing .edit {\n  display: block;\n  width: calc(100% - 43px);\n  padding: 12px 16px;\n  margin: 0 0 0 43px;\n}\n\n.todo-list li.editing .view {\n  display: none;\n}\n\n.todo-list li .toggle {\n  text-align: center;\n  width: 40px;\n  /* auto, since non-WebKit browsers doesn't support input styling */\n  height: auto;\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  margin: auto 0;\n  border: none; /* Mobile Safari */\n  -webkit-appearance: none;\n  appearance: none;\n}\n\n.todo-list li .toggle {\n  opacity: 0;\n}\n\n.todo-list li .toggle + label {\n  /*\n    Firefox requires `#` to be escaped - https://bugzilla.mozilla.org/show_bug.cgi?id=922433\n    IE and Edge requires *everything* to be escaped to render, so we do that instead of just the `#` - https://developer.microsoft.com/en-us/microsoft-edge/platform/issues/7157459/\n  */\n  background-image: url('data:image/svg+xml;utf8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2240%22%20height%3D%2240%22%20viewBox%3D%22-10%20-18%20100%20135%22%3E%3Ccircle%20cx%3D%2250%22%20cy%3D%2250%22%20r%3D%2250%22%20fill%3D%22none%22%20stroke%3D%22%23ededed%22%20stroke-width%3D%223%22/%3E%3C/svg%3E');\n  background-repeat: no-repeat;\n  background-position: center left;\n}\n\n.todo-list li .toggle:checked + label {\n  background-image: url('data:image/svg+xml;utf8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2240%22%20height%3D%2240%22%20viewBox%3D%22-10%20-18%20100%20135%22%3E%3Ccircle%20cx%3D%2250%22%20cy%3D%2250%22%20r%3D%2250%22%20fill%3D%22none%22%20stroke%3D%22%23bddad5%22%20stroke-width%3D%223%22/%3E%3Cpath%20fill%3D%22%235dc2af%22%20d%3D%22M72%2025L42%2071%2027%2056l-4%204%2020%2020%2034-52z%22/%3E%3C/svg%3E');\n}\n\n.todo-list li label {\n  word-break: break-all;\n  padding: 15px 15px 15px 60px;\n  display: block;\n  line-height: 1.2;\n  transition: color 0.4s;\n}\n\n.todo-list li.completed label {\n  color: #d9d9d9;\n  text-decoration: line-through;\n}\n\n.todo-list li .destroy {\n  display: none;\n  position: absolute;\n  top: 0;\n  right: 10px;\n  bottom: 0;\n  width: 40px;\n  height: 40px;\n  margin: auto 0;\n  font-size: 30px;\n  color: #cc9a9a;\n  margin-bottom: 11px;\n  transition: color 0.2s ease-out;\n}\n\n.todo-list li .destroy:hover {\n  color: #af5b5e;\n}\n\n.todo-list li .destroy:after {\n  content: '×';\n}\n\n.todo-list li:hover .destroy {\n  display: block;\n}\n\n.todo-list li .edit {\n  display: none;\n}\n\n.todo-list li.editing:last-child {\n  margin-bottom: -1px;\n}\n\n.footer {\n  color: #777;\n  padding: 10px 15px;\n  height: 20px;\n  text-align: center;\n  border-top: 1px solid #e6e6e6;\n}\n\n.footer:before {\n  content: '';\n  position: absolute;\n  right: 0;\n  bottom: 0;\n  left: 0;\n  height: 50px;\n  overflow: hidden;\n  box-shadow: 0 1px 1px rgba(0, 0, 0, 0.2),\n  0 8px 0 -3px #f6f6f6,\n  0 9px 1px -3px rgba(0, 0, 0, 0.2),\n  0 16px 0 -6px #f6f6f6,\n  0 17px 2px -6px rgba(0, 0, 0, 0.2);\n}\n\n.todo-count {\n  float: left;\n  text-align: left;\n}\n\n.todo-count strong {\n  font-weight: 300;\n}\n\n.filters {\n  margin: 0;\n  padding: 0;\n  list-style: none;\n  position: absolute;\n  right: 0;\n  left: 0;\n}\n\n.filters li {\n  display: inline;\n}\n\n.filters li a {\n  color: inherit;\n  margin: 3px;\n  padding: 3px 7px;\n  text-decoration: none;\n  border: 1px solid transparent;\n  border-radius: 3px;\n}\n\n.filters li a:hover {\n  border-color: rgba(175, 47, 47, 0.1);\n  cursor: pointer;\n}\n\n.filters li a.selected {\n  border-color: rgba(175, 47, 47, 0.2);\n}\n\n.clear-completed,\nhtml .clear-completed:active {\n  float: right;\n  position: relative;\n  line-height: 20px;\n  text-decoration: none;\n  cursor: pointer;\n}\n\n.clear-completed:hover {\n  text-decoration: underline;\n}\n\n.info {\n  margin: 65px auto 0;\n  color: #bfbfbf;\n  font-size: 10px;\n  text-shadow: 0 1px 0 rgba(255, 255, 255, 0.5);\n  text-align: center;\n}\n\n.info p {\n  line-height: 1;\n}\n\n.info a {\n  color: inherit;\n  text-decoration: none;\n  font-weight: 400;\n}\n\n.info a:hover {\n  text-decoration: underline;\n}\n\n/*\n\tHack to remove background from Mobile Safari.\n\tCan't use it globally since it destroys checkboxes in Firefox\n*/\n@media screen and (-webkit-min-device-pixel-ratio:0) {\n  .toggle-all,\n  .todo-list li .toggle {\n    background: none;\n  }\n\n  .todo-list li .toggle {\n    height: 40px;\n  }\n}\n\n@media (max-width: 430px) {\n  .footer {\n    height: 50px;\n  }\n\n  .filters {\n    bottom: 10px;\n  }\n}\n"}],
        links: [{"name":"mithril@2.0.4","type":"script","url":"https://unpkg.com/mithril@2.0.4"}]
      });
      </script>
    
        <div class="dependencies">
          <h2 id="dependencies" class="dependencies__heading" tabindex="-1">Dependencies <a class="direct-link" href="#dependencies" aria-hidden="true">#</a></h2>
          <div class="dependencies__tableWrap">
            <table class="dependencies__table dependencies__table--1">
                <thead>
                    <tr>
                        <th>Type</th>
                        <th>Name</th>
                        <th>URL</th>
                    </tr>
                </thead>
                <tbody>
                <tr><td class="capitalize">script</td><td>mithril@2.0.4</td><td>https://unpkg.com/mithril@2.0.4</td></tr>
                </tbody>
            </table>
          </div>
        </div>
      <h2 id="markup" tabindex="-1">Markup <a class="direct-link" href="#markup" aria-hidden="true">#</a></h2>
<pre><code class="language-html">&lt;body&gt;
&lt;section class=&quot;todoapp&quot;&gt;&lt;/section&gt;
&lt;footer class=&quot;info&quot;&gt;
  &lt;p&gt;Double-click to edit a todo&lt;/p&gt;
  &lt;p&gt;Created by &lt;a href=&quot;http://todomvc.com&quot;&gt;people&lt;/a&gt;&lt;/p&gt;
  &lt;p&gt;Part of &lt;a href=&quot;http://todomvc.com&quot;&gt;TodoMVC&lt;/a&gt;&lt;/p&gt;
&lt;/footer&gt;
&lt;!-- Scripts here. Don't remove ↓ --&gt;
&lt;!-- &lt;script src=&quot;node_modules/todomvc-common/base.js&quot;&gt;&lt;/script&gt;--&gt;
&lt;!-- &lt;script src=&quot;js/app.js&quot;&gt;&lt;/script&gt;--&gt;
&lt;/body&gt;
</code></pre>
<h2 id="model.js" tabindex="-1">Model.js <a class="direct-link" href="#model.js" aria-hidden="true">#</a></h2>
<pre><code class="language-js">// model.js
const model = () =&gt; ({
  todos: [],
  filters: [
    {filter: 'All', text: 'All'},
    {filter: false, text: 'Active'},
    {filter: true,  text: 'Completed'}
  ],
  filter: 'All',
  all: true,
  enter: 13
})

export default model
</code></pre>
<h2 id="actions.js" tabindex="-1">Actions.js <a class="direct-link" href="#actions.js" aria-hidden="true">#</a></h2>
<pre><code class="language-js">// actions.js
const actions = (M, A = {
  init: () =&gt; {M.todos = JSON.parse(localStorage.getItem('todos-mithril')) || []},
  save: () =&gt; localStorage.setItem('todos-mithril', JSON.stringify(M.todos)),
  change: (a,b,c) =&gt; {
    void {
      push: x =&gt; M.todos.push({...x}),
      done: x =&gt; {
        if (x === 'all') {
          M.todos.forEach(y =&gt; y.completed = M.all)
          M.all = !M.all
        }
        else M.todos[x].completed = !M.todos[x].completed
      },
      clear: () =&gt; {
        M.todos = M.todos.filter(x =&gt; !x.completed)
        M.all = true
      },
      splice: i =&gt; M.todos.splice(i,1),
      blur: (i, todo) =&gt; M.todos[i] = {...todo}
    }[a](b,c)

    A.save()
  },
  setfil: fil =&gt; M.filter = fil
}) =&gt; A

export default actions
</code></pre>
<h2 id="header.js" tabindex="-1">Header.js <a class="direct-link" href="#header.js" aria-hidden="true">#</a></h2>
<pre><code class="language-js">// header.js
const header = () =&gt; {
  let todon = {}

  const add = A =&gt; {
    todon.id = Date.now()
    todon.title.trim()
    todon.completed = false
    A.change('push', todon)
    todon = {}
  }

  return {
    view: ({attrs: {M,A}}) =&gt;
      m('header.header',
        m('h1', 'todos'),
        m('input.new-todo', {
          autofocus: true,
          placeholder: 'What needs to be done?',
          oninput: e =&gt; todon.title = e.target.value,
          onkeydown: e =&gt; {if (e.keyCode === M.enter &amp;&amp; e.target.value.trim()) add(A)},
          value: todon.title
        })
      )
  }
}

export default header
</code></pre>
<h2 id="main.js" tabindex="-1">Main.js <a class="direct-link" href="#main.js" aria-hidden="true">#</a></h2>
<pre><code class="language-js">// main.js
const main = () =&gt; {
  const escape = 27
  let todo = {}

  return {
    view: ({attrs: {M,A}}) =&gt;
      m('section.main',
        m('input.toggle-all', {
          id: 'toggle-all',
          type: 'checkbox',
          checked: M.todos.every(x =&gt; x.completed)
        }),
        m('label', {
          for: 'toggle-all',
          onclick: () =&gt; A.change('done', 'all')
        }, 'Mark all as complete'),
        M.todos
          .filter(x =&gt; M.filter === 'All' ? x : x.completed === M.filter)
          .map((x,i) =&gt;
            m('ul.todo-list',
              m('li', {
                  class: `${x.completed ? 'completed' : 'active'} ${x.id === todo.id &amp;&amp; 'editing'}`,
                },
                m('.view',
                  m('input.toggle', {
                    type: 'checkbox',
                    checked: x.completed,
                    onchange: () =&gt; A.change('done', i)
                  }),
                  m('label', {ondblclick: () =&gt; todo = {...x}}, x.title),
                  m('button.destroy', {
                    onclick: () =&gt; A.change('splice', i)
                  })
                ),
                m('input.edit', {
                  onupdate: ({dom}) =&gt; dom.focus(),
                  oninput: e =&gt; todo.title = e.target.value,
                  onblur: e =&gt; {
                    if (Object.keys(todo).length) {
                      if (!todo.title.trim()) {
                        A.change('splice', i)
                        todo = {}
                      }
                      else {
                        A.change('blur', i, todo)
                        todo = {}
                      }
                    }
                  },
                  onkeydown: e =&gt; {
                    if (e.keyCode === M.enter) e.target.blur()
                    else if (e.keyCode === escape) todo = {}
                  },
                  value: todo.title
                })
              )
            )
          )
      )
  }
}

export default main
</code></pre>
<h2 id="footer.js" tabindex="-1">Footer.js <a class="direct-link" href="#footer.js" aria-hidden="true">#</a></h2>
<pre><code class="language-js">// footer.js
const footer = () =&gt; {
  const left = M =&gt; M.todos.filter(x =&gt; !x.completed).length

  return {
    view: ({attrs: {M,A}}) =&gt;
      m('footer.footer',
        m('span.todo-count',
          m('strong', left(M)), ` item${left(M) === 1 ? '' : 's'} left`
        ),
        m('ul.filters',
          M.filters.map(x =&gt;
            m('li',
              m('a', {
                class: M.filter === x.filter &amp;&amp; 'selected',
                onclick: () =&gt; {A.setfil(x.filter); m.route.set('/' + x.text)}
              }, x.text)
            )
          )
        ),
        M.todos.some(x =&gt; x.completed) &amp;&amp;
        m('button.clear-completed', {
          onclick: () =&gt; A.change('clear')
        }, 'Clear completed')
      )
  }
}

export default footer
</code></pre>
<h2 id="app.js" tabindex="-1">App.js <a class="direct-link" href="#app.js" aria-hidden="true">#</a></h2>
<pre><code class="language-js">// app.js
import model   from './model'
import actions from './actions'
import header  from './header'
import main    from './main'
import footer  from './footer'

const app = () =&gt; {
  const M = model()
  const A = actions(M)

  A.init()

  return {
    view: () =&gt; [
      m(header, {M,A}),
      M.todos.length &gt; 0 &amp;&amp; m(main, {M,A}),
      M.todos.length &gt; 0 &amp;&amp; m(footer, {M,A})
    ]
  }
}

m.route(document.querySelector('.todoapp'), '/All', {'/:filter': app})
</code></pre>
<h2 id="css" tabindex="-1">CSS <a class="direct-link" href="#css" aria-hidden="true">#</a></h2>
<pre><code class="language-css">html,
body {
  margin: 0;
  padding: 0;
}

button {
  margin: 0;
  padding: 0;
  border: 0;
  background: none;
  font-size: 100%;
  vertical-align: baseline;
  font-family: inherit;
  font-weight: inherit;
  color: inherit;
  -webkit-appearance: none;
  appearance: none;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

body {
  font: 14px 'Helvetica Neue', Helvetica, Arial, sans-serif;
  line-height: 1.4em;
  background: #f5f5f5;
  color: #4d4d4d;
  min-width: 230px;
  max-width: 550px;
  margin: 0 auto;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  font-weight: 300;
}

:focus {
  outline: 0;
}

.hidden {
  display: none;
}

.todoapp {
  background: #fff;
  margin: 130px 0 40px 0;
  position: relative;
  box-shadow: 0 2px 4px 0 rgba(0, 0, 0, 0.2),
  0 25px 50px 0 rgba(0, 0, 0, 0.1);
}

.todoapp input::-webkit-input-placeholder {
  font-style: italic;
  font-weight: 300;
  color: #e6e6e6;
}

.todoapp input::-moz-placeholder {
  font-style: italic;
  font-weight: 300;
  color: #e6e6e6;
}

.todoapp input::input-placeholder {
  font-style: italic;
  font-weight: 300;
  color: #e6e6e6;
}

.todoapp h1 {
  position: absolute;
  top: -155px;
  width: 100%;
  font-size: 100px;
  font-weight: 100;
  text-align: center;
  color: rgba(175, 47, 47, 0.15);
  -webkit-text-rendering: optimizeLegibility;
  -moz-text-rendering: optimizeLegibility;
  text-rendering: optimizeLegibility;
}

.new-todo,
.edit {
  position: relative;
  margin: 0;
  width: 100%;
  font-size: 24px;
  font-family: inherit;
  font-weight: inherit;
  line-height: 1.4em;
  border: 0;
  color: inherit;
  padding: 6px;
  border: 1px solid #999;
  box-shadow: inset 0 -1px 5px 0 rgba(0, 0, 0, 0.2);
  box-sizing: border-box;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

.new-todo {
  padding: 16px 16px 16px 60px;
  border: none;
  background: rgba(0, 0, 0, 0.003);
  box-shadow: inset 0 -2px 1px rgba(0,0,0,0.03);
}

.main {
  position: relative;
  z-index: 2;
  border-top: 1px solid #e6e6e6;
}

.toggle-all {
  width: 1px;
  height: 1px;
  border: none; /* Mobile Safari */
  opacity: 0;
  position: absolute;
  right: 100%;
  bottom: 100%;
}

.toggle-all + label {
  width: 60px;
  height: 34px;
  font-size: 0;
  position: absolute;
  top: -52px;
  left: -13px;
  -webkit-transform: rotate(90deg);
  transform: rotate(90deg);
}

.toggle-all + label:before {
  content: '❯';
  font-size: 22px;
  color: #e6e6e6;
  padding: 10px 27px 10px 27px;
}

.toggle-all:checked + label:before {
  color: #737373;
}

.todo-list {
  margin: 0;
  padding: 0;
  list-style: none;
}

.todo-list li {
  position: relative;
  font-size: 24px;
  border-bottom: 1px solid #ededed;
}

.todo-list li:last-child {
  border-bottom: none;
}

.todo-list li.editing {
  border-bottom: none;
  padding: 0;
}

.todo-list li.editing .edit {
  display: block;
  width: calc(100% - 43px);
  padding: 12px 16px;
  margin: 0 0 0 43px;
}

.todo-list li.editing .view {
  display: none;
}

.todo-list li .toggle {
  text-align: center;
  width: 40px;
  /* auto, since non-WebKit browsers doesn't support input styling */
  height: auto;
  position: absolute;
  top: 0;
  bottom: 0;
  margin: auto 0;
  border: none; /* Mobile Safari */
  -webkit-appearance: none;
  appearance: none;
}

.todo-list li .toggle {
  opacity: 0;
}

.todo-list li .toggle + label {
  /*
    Firefox requires `#` to be escaped - https://bugzilla.mozilla.org/show_bug.cgi?id=922433
    IE and Edge requires *everything* to be escaped to render, so we do that instead of just the `#` - https://developer.microsoft.com/en-us/microsoft-edge/platform/issues/7157459/
  */
  background-image: url('data:image/svg+xml;utf8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2240%22%20height%3D%2240%22%20viewBox%3D%22-10%20-18%20100%20135%22%3E%3Ccircle%20cx%3D%2250%22%20cy%3D%2250%22%20r%3D%2250%22%20fill%3D%22none%22%20stroke%3D%22%23ededed%22%20stroke-width%3D%223%22/%3E%3C/svg%3E');
  background-repeat: no-repeat;
  background-position: center left;
}

.todo-list li .toggle:checked + label {
  background-image: url('data:image/svg+xml;utf8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2240%22%20height%3D%2240%22%20viewBox%3D%22-10%20-18%20100%20135%22%3E%3Ccircle%20cx%3D%2250%22%20cy%3D%2250%22%20r%3D%2250%22%20fill%3D%22none%22%20stroke%3D%22%23bddad5%22%20stroke-width%3D%223%22/%3E%3Cpath%20fill%3D%22%235dc2af%22%20d%3D%22M72%2025L42%2071%2027%2056l-4%204%2020%2020%2034-52z%22/%3E%3C/svg%3E');
}

.todo-list li label {
  word-break: break-all;
  padding: 15px 15px 15px 60px;
  display: block;
  line-height: 1.2;
  transition: color 0.4s;
}

.todo-list li.completed label {
  color: #d9d9d9;
  text-decoration: line-through;
}

.todo-list li .destroy {
  display: none;
  position: absolute;
  top: 0;
  right: 10px;
  bottom: 0;
  width: 40px;
  height: 40px;
  margin: auto 0;
  font-size: 30px;
  color: #cc9a9a;
  margin-bottom: 11px;
  transition: color 0.2s ease-out;
}

.todo-list li .destroy:hover {
  color: #af5b5e;
}

.todo-list li .destroy:after {
  content: '×';
}

.todo-list li:hover .destroy {
  display: block;
}

.todo-list li .edit {
  display: none;
}

.todo-list li.editing:last-child {
  margin-bottom: -1px;
}

.footer {
  color: #777;
  padding: 10px 15px;
  height: 20px;
  text-align: center;
  border-top: 1px solid #e6e6e6;
}

.footer:before {
  content: '';
  position: absolute;
  right: 0;
  bottom: 0;
  left: 0;
  height: 50px;
  overflow: hidden;
  box-shadow: 0 1px 1px rgba(0, 0, 0, 0.2),
  0 8px 0 -3px #f6f6f6,
  0 9px 1px -3px rgba(0, 0, 0, 0.2),
  0 16px 0 -6px #f6f6f6,
  0 17px 2px -6px rgba(0, 0, 0, 0.2);
}

.todo-count {
  float: left;
  text-align: left;
}

.todo-count strong {
  font-weight: 300;
}

.filters {
  margin: 0;
  padding: 0;
  list-style: none;
  position: absolute;
  right: 0;
  left: 0;
}

.filters li {
  display: inline;
}

.filters li a {
  color: inherit;
  margin: 3px;
  padding: 3px 7px;
  text-decoration: none;
  border: 1px solid transparent;
  border-radius: 3px;
}

.filters li a:hover {
  border-color: rgba(175, 47, 47, 0.1);
  cursor: pointer;
}

.filters li a.selected {
  border-color: rgba(175, 47, 47, 0.2);
}

.clear-completed,
html .clear-completed:active {
  float: right;
  position: relative;
  line-height: 20px;
  text-decoration: none;
  cursor: pointer;
}

.clear-completed:hover {
  text-decoration: underline;
}

.info {
  margin: 65px auto 0;
  color: #bfbfbf;
  font-size: 10px;
  text-shadow: 0 1px 0 rgba(255, 255, 255, 0.5);
  text-align: center;
}

.info p {
  line-height: 1;
}

.info a {
  color: inherit;
  text-decoration: none;
  font-weight: 400;
}

.info a:hover {
  text-decoration: underline;
}

/*
	Hack to remove background from Mobile Safari.
	Can't use it globally since it destroys checkboxes in Firefox
*/
@media screen and (-webkit-min-device-pixel-ratio:0) {
  .toggle-all,
  .todo-list li .toggle {
    background: none;
  }

  .todo-list li .toggle {
    height: 40px;
  }
}

@media (max-width: 430px) {
  .footer {
    height: 50px;
  }

  .filters {
    bottom: 10px;
  }
}
</code></pre>
<p>The snippet requires the latest version 2.0.4 of Mithril.js framework.
As an expert user, who is familiar with all the aspects of Mithril.js and JavaScript itself, you are able the follow the example easily.</p>
<p>In this example we can see an example of Mithril.js' <code>m.route</code> <a href="/api-methods/">API method</a>, besides it core m() hyperscript function.
It is also showing the <code>onupdate</code> hook, which is one of several Mithril.js' <a href="/lifecycle-methods/">lifecycle methods</a>.</p>
<p>The code sample was authored by osban. It was last modified on 29 October 2021.
Want to see more examples written by osban? Then <a href="/contributors/osban/">Click here</a>.</p>


        <h2 id="contribute" tabindex="-1">Contribute <a class="direct-link" href="#contribute" aria-hidden="true">#</a></h2>
<p>Do you see some improvements, that could be addressed here? Then let me know by <a href="https://github.com/tbreuss/mithril-by-examples/issues">opening an issue</a>.
As an alternative, you can fork the repository on GitHub, push your commits and send a pull request.
To start your work, click on the edit link below. Thank you for contributing to this repo.</p>


        <p style="margin-top:3.2rem;">
          <a href="/examples/">See more code examples</a>
          &nbsp;|&nbsp; <a target="_blank" href="https://github.com/tbreuss/mithril-by-examples/blob/main/./examples/todo-mvc-mitosis.md">Edit this example on GitHub</a>
        </p>

    </div>
  </div>
</div>

    <div class="footer">
      <div class="container">
          <div class="pure-g">
              <div class="pure-u-1 pure-u-md-3-5 footer-about">
                  <h3 class="footer-about__heading">Mithril.js by Examples</h3>
                  <p class="footer-about__text">The missing addition to Mithril.js' website with many up-to-date code examples that are often searched for and just work...</p>
              </div>
              <div class="pure-u-1-2 pure-u-md-1-5 footer-tools">
                <h3 class="footer-tools__heading">Toolset</h3>
                <ul class="footer-tools__list">
                    <li><a target="_blank" href="https://www.11ty.dev">Eleventy</a></li>
                    <li><a target="_blank" href="http://purecss.io">Pure.css</a></li>
                    <li><a target="_blank" href="https://flems.io">Flems.io</a></li>
                    <li><a target="_blank" href="http://mithril.js.org">Mithril.js</a></li>
                </ul>
            </div>
              <div class="pure-u-1-2 pure-u-md-1-5 footer-links">
                  <h3 class="footer-links__heading">Links</h3>
                  <ul class="footer-links__list">
                      <li><a href="/about/">About this website</a></li>
                      <li><a target="_blank" href="https://github.com/tbreuss/mithril-by-examples">GitHub Repository</a></li>
                  </ul>
              </div>
          </div>
          <hr class="footer-ruler">
          <div class="pure-g">
              <div class="pure-u-1 footer-copyright">
                  A tiny <a target="_blank" href="https://www.tebe.ch">tebe.ch</a> project
              </div>
          </div>
      </div>
  </div>
  <!-- Current page: /examples/todo-mvc-mitosis/ -->
  </body>
  <script src="/css/highlight/highlight.min.js?v=1646565642"></script>
  <script src="/js/main.js?v=1646565642"></script>
</html>
